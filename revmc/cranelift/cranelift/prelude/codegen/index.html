<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Cranelift code generation library."><title>revmc::cranelift::cranelift::prelude::codegen - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../../static.files/rustdoc-e7950ecc.css"><meta name="rustdoc-vars" data-root-path="../../../../../" data-static-root-path="../../../../../static.files/" data-current-crate="revmc" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (bf1b174e7 2025-01-28)" data-channel="nightly" data-search-js="search-ccb196c1.js" data-settings-js="settings-0f613d39.js" ><script src="../../../../../static.files/storage-59e33391.js"></script><script defer src="../../../../../crates.js"></script><script defer src="../../../../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../../revmc/index.html">revmc</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In revmc::<wbr>cranelift::<wbr>cranelift::<wbr>prelude</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../../index.html">revmc</a>::<wbr><a href="../../../index.html">cranelift</a>::<wbr><a href="../../index.html">cranelift</a>::<wbr><a href="../index.html">prelude</a></div><h1>Crate <span>codegen</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>cranelift</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Cranelift code generation library.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="bforest/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::bforest">bforest</a></dt><dd>A forest of B+-trees.</dd><dt><a class="mod" href="binemit/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::binemit">binemit</a></dt><dd>Binary machine code emission.</dd><dt><a class="mod" href="bitset/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::bitset">bitset</a></dt><dd>Bitsets for Cranelift.</dd><dt><a class="mod" href="cfg_printer/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::cfg_printer">cfg_<wbr>printer</a></dt><dd>The <code>CFGPrinter</code> utility.</dd><dt><a class="mod" href="control/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::control">control</a></dt><dd>Cranelift Control</dd><dt><a class="mod" href="cursor/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::cursor">cursor</a></dt><dd>Cursor library.</dd><dt><a class="mod" href="data_value/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::data_value">data_<wbr>value</a></dt><dd>This module gives users to instantiate values that Cranelift understands. These values are used,
for example, during interpretation and for wrapping immediates.</dd><dt><a class="mod" href="dbg/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::dbg">dbg</a></dt><dd>Debug tracing helpers.</dd><dt><a class="mod" href="dominator_tree/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::dominator_tree">dominator_<wbr>tree</a></dt><dd>A Dominator Tree represented as mappings of Blocks to their immediate dominator.</dd><dt><a class="mod" href="entity/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::entity">entity</a></dt><dd>Array-based data structures using densely numbered entity references as mapping keys.</dd><dt><a class="mod" href="flowgraph/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::flowgraph">flowgraph</a></dt><dd>A control flow graph represented as mappings of basic blocks to their predecessors
and successors.</dd><dt><a class="mod" href="gimli/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::gimli">gimli</a></dt><dd><code>gimli</code> is a library for reading and writing the
<a href="https://dwarfstd.org/">DWARF debugging format</a>.</dd><dt><a class="mod" href="ir/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::ir">ir</a></dt><dd>Representation of Cranelift IR functions.</dd><dt><a class="mod" href="isa/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::isa">isa</a></dt><dd>Instruction Set Architectures.</dd><dt><a class="mod" href="loop_analysis/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::loop_analysis">loop_<wbr>analysis</a></dt><dd>A loop analysis represented as mappings of loops to their header Block
and parent in the loop tree.</dd><dt><a class="mod" href="print_errors/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::print_errors">print_<wbr>errors</a></dt><dd>Utility routines for pretty-printing error messages.</dd><dt><a class="mod" href="settings/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::settings">settings</a></dt><dd>Shared settings module.</dd><dt><a class="mod" href="timing/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::timing">timing</a></dt><dd>Pass timing.</dd><dt><a class="mod" href="traversals/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::traversals">traversals</a></dt><dd>Traversals over the IR.</dd><dt><a class="mod" href="verifier/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::verifier">verifier</a></dt><dd>A verifier for ensuring that functions are well formed.
It verifies:</dd><dt><a class="mod" href="write/index.html" title="mod revmc::cranelift::cranelift::prelude::codegen::write">write</a></dt><dd>Converting Cranelift IR to text.</dd></dl><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><dl class="item-table"><dt><a class="macro" href="macro.trace.html" title="macro revmc::cranelift::cranelift::prelude::codegen::trace">trace</a></dt><dd>Even when trace logging is disabled, the trace macro has a significant performance cost so we
disable it by default.</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.CallInfo.html" title="struct revmc::cranelift::cranelift::prelude::codegen::CallInfo">Call<wbr>Info</a></dt><dd>Out-of-line data for calls, to keep the size of <code>Inst</code> down.</dd><dt><a class="struct" href="struct.CompileError.html" title="struct revmc::cranelift::cranelift::prelude::codegen::CompileError">Compile<wbr>Error</a></dt><dd>Compilation error, with the accompanying function to help printing it.</dd><dt><a class="struct" href="struct.Context.html" title="struct revmc::cranelift::cranelift::prelude::codegen::Context">Context</a></dt><dd>Persistent data structures and compilation pipeline.</dd><dt><a class="struct" href="struct.Final.html" title="struct revmc::cranelift::cranelift::prelude::codegen::Final">Final</a></dt><dd>Status of a compiled artifact ready to use.</dd><dt><a class="struct" href="struct.MachBuffer.html" title="struct revmc::cranelift::cranelift::prelude::codegen::MachBuffer">Mach<wbr>Buffer</a></dt><dd>A buffer of output to be produced, fixed up, and then emitted to a CodeSink
in bulk.</dd><dt><a class="struct" href="struct.MachBufferFinalized.html" title="struct revmc::cranelift::cranelift::prelude::codegen::MachBufferFinalized">Mach<wbr>Buffer<wbr>Finalized</a></dt><dd>A <code>MachBuffer</code> once emission is completed: holds generated code and records,
without fixups. This allows the type to be independent of the backend.</dd><dt><a class="struct" href="struct.MachCallSite.html" title="struct revmc::cranelift::cranelift::prelude::codegen::MachCallSite">Mach<wbr>Call<wbr>Site</a></dt><dd>A call site record resulting from a compilation.</dd><dt><a class="struct" href="struct.MachLabel.html" title="struct revmc::cranelift::cranelift::prelude::codegen::MachLabel">Mach<wbr>Label</a></dt><dd>A label refers to some offset in a <code>MachBuffer</code>. It may not be resolved at
the point at which it is used by emitted code; the buffer records “fixups”
for references to the label, and will come back and patch the code
appropriately when the label’s location is eventually known.</dd><dt><a class="struct" href="struct.MachSrcLoc.html" title="struct revmc::cranelift::cranelift::prelude::codegen::MachSrcLoc">Mach<wbr>SrcLoc</a></dt><dd>A source-location mapping resulting from a compilation.</dd><dt><a class="struct" href="struct.MachTextSectionBuilder.html" title="struct revmc::cranelift::cranelift::prelude::codegen::MachTextSectionBuilder">Mach<wbr>Text<wbr>Section<wbr>Builder</a></dt><dd>Implementation of the <code>TextSectionBuilder</code> trait backed by <code>MachBuffer</code>.</dd><dt><a class="struct" href="struct.MachTrap.html" title="struct revmc::cranelift::cranelift::prelude::codegen::MachTrap">Mach<wbr>Trap</a></dt><dd>A trap record resulting from a compilation.</dd><dt><a class="struct" href="struct.OpenPatchRegion.html" title="struct revmc::cranelift::cranelift::prelude::codegen::OpenPatchRegion">Open<wbr>Patch<wbr>Region</a></dt><dd>Represents the beginning of an editable region in the <a href="struct.MachBuffer.html" title="struct revmc::cranelift::cranelift::prelude::codegen::MachBuffer"><code>MachBuffer</code></a>, while code emission is
still occurring. An <a href="struct.OpenPatchRegion.html" title="struct revmc::cranelift::cranelift::prelude::codegen::OpenPatchRegion"><code>OpenPatchRegion</code></a> is closed by <a href="struct.MachBuffer.html#method.end_patchable" title="method revmc::cranelift::cranelift::prelude::codegen::MachBuffer::end_patchable"><code>MachBuffer::end_patchable</code></a>, consuming
the <a href="struct.OpenPatchRegion.html" title="struct revmc::cranelift::cranelift::prelude::codegen::OpenPatchRegion"><code>OpenPatchRegion</code></a> token in the process.</dd><dt><a class="struct" href="struct.PatchRegion.html" title="struct revmc::cranelift::cranelift::prelude::codegen::PatchRegion">Patch<wbr>Region</a></dt><dd>A region in the <a href="struct.MachBuffer.html" title="struct revmc::cranelift::cranelift::prelude::codegen::MachBuffer"><code>MachBuffer</code></a> code buffer that can be edited prior to finalization. An example
of where you might want to use this is for patching instructions that mention constants that
won’t be known until later: <a href="struct.MachBuffer.html#method.start_patchable" title="method revmc::cranelift::cranelift::prelude::codegen::MachBuffer::start_patchable"><code>MachBuffer::start_patchable</code></a> can be used to begin the patchable
region, instructions can be emitted with placeholder constants, and the <a href="struct.PatchRegion.html" title="struct revmc::cranelift::cranelift::prelude::codegen::PatchRegion"><code>PatchRegion</code></a> token
can be produced by <a href="struct.MachBuffer.html#method.end_patchable" title="method revmc::cranelift::cranelift::prelude::codegen::MachBuffer::end_patchable"><code>MachBuffer::end_patchable</code></a>. Once the values of those constants are known,
the <a href="struct.PatchRegion.html#method.patch" title="method revmc::cranelift::cranelift::prelude::codegen::PatchRegion::patch"><code>PatchRegion::patch</code></a> function can be used to get a mutable buffer to the instruction
bytes, and the constants uses can be updated directly.</dd><dt><a class="struct" href="struct.RealReg.html" title="struct revmc::cranelift::cranelift::prelude::codegen::RealReg">RealReg</a></dt><dd>A real (physical) register. This corresponds to one of the target
ISA’s named registers and can be used as an instruction operand.</dd><dt><a class="struct" href="struct.Reg.html" title="struct revmc::cranelift::cranelift::prelude::codegen::Reg">Reg</a></dt><dd>A register named in an instruction. This register can be either a
virtual register or a fixed physical register. It does not have
any constraints applied to it: those can be added later in
<code>MachInst::get_operands()</code> when the <code>Reg</code>s are converted to
<code>Operand</code>s.</dd><dt><a class="struct" href="struct.VCodeConstants.html" title="struct revmc::cranelift::cranelift::prelude::codegen::VCodeConstants">VCode<wbr>Constants</a></dt><dd>This structure tracks the large constants used in VCode that will be emitted separately by the
<a href="struct.MachBuffer.html" title="struct revmc::cranelift::cranelift::prelude::codegen::MachBuffer">MachBuffer</a>.</dd><dt><a class="struct" href="struct.ValueLocRange.html" title="struct revmc::cranelift::cranelift::prelude::codegen::ValueLocRange">Value<wbr>LocRange</a></dt><dd>Value location range.</dd><dt><a class="struct" href="struct.Writable.html" title="struct revmc::cranelift::cranelift::prelude::codegen::Writable">Writable</a></dt><dd>A type wrapper that indicates a register type is writable. The
underlying register can be extracted, and the type wrapper can be
built using an arbitrary register. Hence, this type-level wrapper
is not strictly a guarantee. However, “casting” to a writable
register is an explicit operation for which we can
audit. Ordinarily, internal APIs in the compiler backend should
take a <code>Writable&lt;Reg&gt;</code> whenever the register is written, and the
usual, frictionless way to get one of these is to allocate a new
temporary.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.CodegenError.html" title="enum revmc::cranelift::cranelift::prelude::codegen::CodegenError">Codegen<wbr>Error</a></dt><dd>A compilation error.</dd><dt><a class="enum" href="enum.FinalizedRelocTarget.html" title="enum revmc::cranelift::cranelift::prelude::codegen::FinalizedRelocTarget">Finalized<wbr>Reloc<wbr>Target</a></dt><dd>A Relocation target</dd><dt><a class="enum" href="enum.LabelValueLoc.html" title="enum revmc::cranelift::cranelift::prelude::codegen::LabelValueLoc">Label<wbr>Value<wbr>Loc</a></dt><dd>The particular location for a value.</dd><dt><a class="enum" href="enum.RelocDistance.html" title="enum revmc::cranelift::cranelift::prelude::codegen::RelocDistance">Reloc<wbr>Distance</a></dt><dd>Notion of “relocation distance”. This gives an estimate of how far away a symbol will be from a
reference.</dd><dt><a class="enum" href="enum.VCodeConstantData.html" title="enum revmc::cranelift::cranelift::prelude::codegen::VCodeConstantData">VCode<wbr>Constant<wbr>Data</a></dt><dd>Identify the different types of constant that can be inserted into <a href="struct.VCodeConstants.html" title="struct revmc::cranelift::cranelift::prelude::codegen::VCodeConstants">VCodeConstants</a>. Tracking
these separately instead of as raw byte buffers allows us to avoid some duplication.</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.VERSION.html" title="constant revmc::cranelift::cranelift::prelude::codegen::VERSION">VERSION</a></dt><dd>Version number of this crate.</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.MachInst.html" title="trait revmc::cranelift::cranelift::prelude::codegen::MachInst">Mach<wbr>Inst</a></dt><dd>A machine instruction.</dd><dt><a class="trait" href="trait.MachInstEmit.html" title="trait revmc::cranelift::cranelift::prelude::codegen::MachInstEmit">Mach<wbr>Inst<wbr>Emit</a></dt><dd>A trait describing the ability to encode a MachInst into binary machine code.</dd><dt><a class="trait" href="trait.MachInstEmitState.html" title="trait revmc::cranelift::cranelift::prelude::codegen::MachInstEmitState">Mach<wbr>Inst<wbr>Emit<wbr>State</a></dt><dd>A trait describing the emission state carried between MachInsts when
emitting a function body.</dd><dt><a class="trait" href="trait.TextSectionBuilder.html" title="trait revmc::cranelift::cranelift::prelude::codegen::TextSectionBuilder">Text<wbr>Section<wbr>Builder</a></dt><dd>An object that can be used to create the text section of an executable.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.verify_function.html" title="fn revmc::cranelift::cranelift::prelude::codegen::verify_function">verify_<wbr>function</a></dt><dd>Verify <code>func</code>.</dd><dt><a class="fn" href="fn.write_function.html" title="fn revmc::cranelift::cranelift::prelude::codegen::write_function">write_<wbr>function</a></dt><dd>Write <code>func</code> to <code>w</code> as equivalent text.
Use <code>isa</code> to emit ISA-dependent annotations.</dd></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><dl class="item-table"><dt><a class="type" href="type.CodegenResult.html" title="type revmc::cranelift::cranelift::prelude::codegen::CodegenResult">Codegen<wbr>Result</a></dt><dd>A convenient alias for a <code>Result</code> that uses <code>CodegenError</code> as the error type.</dd><dt><a class="type" href="type.CompiledCode.html" title="type revmc::cranelift::cranelift::prelude::codegen::CompiledCode">Compiled<wbr>Code</a></dt><dd><code>CompiledCode</code> in its final form (i.e. after <code>FunctionParameters</code> have been applied), ready for
consumption.</dd><dt><a class="type" href="type.FinalizedMachReloc.html" title="type revmc::cranelift::cranelift::prelude::codegen::FinalizedMachReloc">Finalized<wbr>Mach<wbr>Reloc</a></dt><dd>A relocation resulting from a compilation.</dd><dt><a class="type" href="type.ValueLabelsRanges.html" title="type revmc::cranelift::cranelift::prelude::codegen::ValueLabelsRanges">Value<wbr>Labels<wbr>Ranges</a></dt><dd>Resulting map of Value labels and their ranges/locations.</dd></dl></section></div></main></body></html>